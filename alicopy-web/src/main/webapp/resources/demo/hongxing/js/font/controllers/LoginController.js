(function(){var e,r;e=[],r=function(){var e;return e=function($scope,$rootScope,$location,$http,$timeout,tele,pageUtils,validate,SERVER,LOGIN_EVENT_NAME,ERROR_LOGIN_UNKNOWN,ERROR_LOGIN_TIME){return $rootScope.name?($timeout(function(){return $scope.login.name.$stateVisible=!0}),$scope.password="",$scope.resetPasswordUrl="https://"+SERVER+"/user/password/reset",$scope.focuses={password:!0},$scope.disableInputs=!1,$scope.doLogin=function(){var e;return e=$scope.login.password,e.$stateVisible=!0,$scope.login.$valid?($scope.disableInputs=!0,$http.get("https://"+SERVER+"/user/login",{params:{name:$rootScope.name,password:$scope.password}}).success(function(r){return r.error?($scope.disableInputs=!1,"PASSWORD"===r.error?e.$setValidity("mismatch",!1):alert(r.message)):(tele.run("userManager.load",r).then(function(){return tele.run("userManager.checkin").then(function(){return pageUtils.redirectUrl("options.html")})}),tele.run("track.pv","/chrome-extension/login/success"),$rootScope.isVirgin?tele.run("track.event",LOGIN_EVENT_NAME,"login-success"):void 0)}).error(function(){return alert($scope.betweenCertInterval()?ERROR_LOGIN_UNKNOWN:ERROR_LOGIN_TIME),$scope.disableInputs=!1})):void 0}):$rootScope.goToAccountView()}},define(e,r)}).call(this);